webpackJsonp([3],{0:function(t,n,e){(function(t){"use strict";var n=e(1),r=n.module("sba-applications-jmx",["sba-applications"]);t.sbaModules.push(r.name),r.service("ApplicationJmx",e(104)),r.service("jolokia",e(105)),r.controller("jmxCtrl",e(103)),r.component("sbaJmxBean",e(98)),r.component("sbaJavaTypeInput",e(97)),r.component("sbaJmxInvocation",e(99)),r.component("sbaJmxInvokeSelectOverload",e(101)),r.component("sbaJmxInvokeInputParameters",e(100)),r.component("sbaJmxInvokeShowResult",e(102)),r.config(["$stateProvider",function(t){t.state("applications.jmx",{url:"/jmx",templateUrl:"applications-jmx/views/jmx.html",controller:"jmxCtrl"})}]),r.run(["ApplicationViews","$sce","$http","jolokia","ApplicationJmx",function(t,n,e,r,a){t.register({order:40,title:n.trustAsHtml('<i class="fa fa-cogs fa-fw"></i>JMX'),state:"applications.jmx",show:function(t){return e.head("api/applications/"+t.id+"/jolokia").then(function(){return a.list(t).then(function(){return!0}).catch(function(){return!1})}).catch(function(){return!1})}})}])}).call(n,function(){return this}())},20:function(t,n,e){var r,a,o;!function(){var i=function(t){function n(r){if(!(this instanceof arguments.callee))return new n(r);this.CLIENT_VERSION="1.3.2";var a=[],o={},i=!1;"string"==typeof r&&(r={url:r}),t.extend(o,v,r),this.request=function(e,r){var a=t.extend({},o,r);b(a.url,"No URL given");var i={};if(t.each(["username","password","timeout"],function(t,n){a[n]&&(i[n]=a[n])}),i.username&&i.password&&(window.btoa&&(i.beforeSend=function(t){var n=i.username+":"+i.password;t.setRequestHeader("Authorization","Basic "+window.btoa(n))}),i.xhrFields={withCredentials:!0}),"post"===l(e,a)?(t.extend(i,m),i.data=JSON.stringify(e),i.url=p(a.url)):(t.extend(i,h),i.dataType=a.jsonp?"jsonp":"json",i.url=a.url+"/"+u(e)),i.url=c(i.url,a),a.ajaxError&&(i.error=a.ajaxError),a.success){var d=s(a.success),f=s(a.error);return i.success=function(e){for(var r=t.isArray(e)?e:[e],a=0;a<r.length;a++){var o=r[a];n.isError(o)?f(o,a):d(o,a)}},t.ajax(i),null}if(a.jsonp)throw Error("JSONP is not supported for synchronous requests");i.async=!1;var v=t.ajax(i);return g(v)?t.parseJSON(v.responseText):null},this.register=function(){if(arguments.length<2)throw"At a least one request must be provided";var n,e=arguments[0],r=Array.prototype.slice.call(arguments,1);if("object"==typeof e){if(e.success&&e.error)n={success:e.success,error:e.error};else{if(!e.callback)throw"Either 'callback' or ('success' and 'error') callback must be provided when registering a Jolokia job";n={callback:e.callback}}n=t.extend(n,{config:e.config,onlyIfModified:e.onlyIfModified})}else{if("function"!=typeof e)throw"First argument must be either a callback func or an object with 'success' and 'error' attributes";n={success:null,error:null,callback:e}}if(!r)throw"No requests given";n.requests=r;var o=a.length;return a[o]=n,o},this.unregister=function(t){t<a.length&&(a[t]=void 0)},this.jobs=function(){for(var t=[],n=a.length,e=0;e<n;e++)a[e]&&t.push(e);return t},this.start=function(t){if(t=t||o.fetchInterval||3e4,i){if(t===o.fetchInterval)return;this.stop()}o.fetchInterval=t,this.timerId=setInterval(e(this,a),t),i=!0},this.stop=function(){(i||void 0==this.timerId)&&(clearInterval(this.timerId),this.timerId=null,i=!1)},this.isRunning=function(){return i}}function e(t,n){return function(){var e,s,l=[],c=[],u=n.length,p=[];for(e=0;e<u;e++){var d=n[e];if(d){var f=d.requests.length;if(d.success){var g=i(d,e),b=o(d,e);for(s=0;s<f;s++)p.push(r(d,s)),c.push(g),l.push(b)}else{var v=a(d,t);for(s=0;s<f-1;s++)p.push(r(d,s)),c.push(v.cb),l.push(v.cb);p.push(r(d,f-1)),c.push(v.lcb),l.push(v.lcb)}}}var h={success:function(n,e){return c[e].apply(t,[n,e])},error:function(n,e){return l[e].apply(t,[n,e])}};return t.request(p,h)}}function r(n,e){var r=n.requests[e],a=n.config||{},o=n.onlyIfModified&&n.lastModified?{ifModifiedSince:n.lastModified}:{};return r.config=t.extend({},a,r.config,o),r}function a(t,n){function e(t,n){304!=t.status&&((0==o||t.timestamp<o)&&(o=t.timestamp),r.push(t))}var r=[],a=t.callback,o=0;return{cb:e,lcb:function(i,s){e(i),r.length>0&&(t.lastModified=o,a.apply(n,r))}}}function o(t,n){var e=t.error;return function(t,r){304!=t.status&&e&&e(t,n,r)}}function i(t,n){var e=t.success;return function(r,a){e&&(t.onlyIfModified&&(t.lastModified=r.timestamp),e(r,n,a))}}function s(n){if(null==n)return function(t){console.warn("Ignoring response "+JSON.stringify(t))};if("ignore"===n)return function(){};var e=t.isArray(n)?n:[n];return function(t,n){e[n%e.length](t,n)}}function l(n,e){var r,a=e&&e.method?e.method.toLowerCase():null;if(a){if("get"===a){if(t.isArray(n))throw new Error("Cannot use GET with bulk requests");if("read"===n.type.toLowerCase()&&t.isArray(n.attribute))throw new Error("Cannot use GET for read with multiple attributes");if(n.target)throw new Error("Cannot use GET request with proxy mode");if(n.config)throw new Error("Cannot use GET with request specific config")}r=a}else r=t.isArray(n)||n.config||"read"===n.type.toLowerCase()&&t.isArray(n.attribute)||n.target?"post":"get";if(e.jsonp&&"post"===r)throw new Error("Can not use JSONP with POST requests");return r}function c(n,e){var r=n.indexOf("?")>0?"&":"?";return t.each(y,function(t,a){null!=e[a]&&(n+=r+a+"="+e[a],r="&")}),n}function u(e){var r=e.type;b(r,"No request type given for building a GET request"),r=r.toLowerCase();var a=x[r];b(a,"Unknown request type "+r);var o=a(e),i=o.parts||[],s=r;return t.each(i,function(t,e){s+="/"+n.escape(e)}),o.path&&(s+=("/"==o.path[0]?"":"/")+o.path),console.log(s),s}function p(t){return t.replace(/\/*$/,"/")}function d(n){if(null==n)return"[null]";if(t.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=null==n?"[null]":f(n[r]),r<n.length-1&&(e+=",");return e}return f(n)}function f(t){return"string"==typeof t&&0==t.length?'""':t.toString()}function g(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1}function b(t,n){if(null==t)throw new Error(n)}var v={type:"POST",jsonp:!1},h={type:"GET"},m={type:"POST",processData:!1,dataType:"json",contentType:"text/json"},y=["maxDepth","maxCollectionSize","maxObjects","ignoreErrors","canonicalNaming","serializeException","includeStackTrace","ifModifiedSince"],x={read:function(t){return null==t.attribute?{parts:[t.mbean,"*"],path:t.path}:{parts:[t.mbean,t.attribute],path:t.path}},write:function(t){return{parts:[t.mbean,t.attribute,d(t.value)],path:t.path}},exec:function(n){var e=[n.mbean,n.operation];return n.arguments&&n.arguments.length>0&&t.each(n.arguments,function(t,n){e.push(d(n))}),{parts:e}},version:function(){return{}},search:function(t){return{parts:[t.mbean]}},list:function(t){return{path:t.path}}};return n.prototype.escape=n.escape=function(t){return encodeURIComponent(t.replace(/!/g,"!!").replace(/\//g,"!/"))},n.prototype.isError=n.isError=function(t){return null==t.status||200!=t.status},n};!function(i,s){a=[e(7)],r=s,o="function"==typeof r?r.apply(n,a):r,!(void 0!==o&&(t.exports=o))}(this,function(t){return i(t)})}()},97:function(t,n,e){"use strict";var r=e(1);t.exports={bindings:{value:"<sbaValue",disabled:"<sbaDisabled",type:"@sbaType",onChange:"&sbaChange"},controller:function(){"ngInject";var t=this;t.$onInit=function(){t.inputType=function(){switch(t.type){case"java.lang.String":return"text";case"int":case"java.lang.Integer":case"long":case"java.lang.Long":case"double":case"java.lang.Double":case"float":case"java.lang.Float":case"short":case"java.lang.short":case"java.lang.Number":return"number";default:return null}}(),t.selectOptions=function(){switch(t.type){case"boolean":return[!0,!1];case"java.lang.Boolean":return[null,!0,!1];default:return null}}(),t.isObject=null===t.selectOptions&&null===t.inputType},t.$onChanges=function(){t.isObject&&(t.json=r.toJson(t.value,!0))},t.valueChanged=function(){t.onChange({value:t.value,error:null})},t.jsonChanged=function(){try{t.onChange({value:r.fromJson(t.json),error:null})}catch(n){t.onChange({value:null,error:n})}}},template:e(148)}},98:function(t,n,e){"use strict";var r=e(1);t.exports={bindings:{bean:"<bean",application:"<application"},controller:["ApplicationJmx",function(t){"ngInject";var n=this;n.invocation=null,n.$onChanges=function(){n.bean?(n.initAttributes(),n.readAttributeValues()):(n.attributes={},n.error=null)},n.initAttributes=function(){n.attributes={},r.forEach(n.bean.attributes,function(t,e){n.attributes[e]={value:null,error:null,descriptor:t}})},n.readAttributeValues=function(){n.readingAttributes=!0,n.error=null,t.readAllAttr(n.application,n.bean).then(function(t){r.forEach(t.value,function(t,e){n.attributes[e].value=t}),n.readingAttributes=!1}).catch(function(t){n.error=t.error,n.readingAttributes=!1})},n.updateAttributeValue=function(t,e,r){n.attributes[t].value=e,n.attributes[t].error=r},n.writeAttributeValue=function(e){n.attributes[e].error=null,t.writeAttr(n.application,n.bean,e,n.attributes[e].value).catch(function(t){n.attributes[e].error=t.error})},n.doInvoke=function(t,e){n.invocation={name:t,operation:e}},n.cancelInvoke=function(){n.invocation=null}}],template:e(149)}},99:function(t,n,e){"use strict";t.exports={bindings:{name:"<operationName",descriptor:"<operationDescriptor",cancelInvoke:"&onCancel"},require:{parent:"^sbaJmxBean"},controller:["ApplicationJmx",function(t){"ngInject";var n=this,e=function(t){var n=t.map(function(t){return t.type}).join(",");return"("+n+")"};n.$onInit=function(){n.state="init",n.signature="",n.arguments=[],n.response=null,n.proceedJmxInvocation()},n.proceedJmxInvocation=function(){return n.descriptor instanceof Array?void(n.state="selectOverload"):(n.signature=n.name+e(n.descriptor.args),n.descriptor.args.length>0&&n.descriptor.args.length>n.arguments.length?void(n.state="inputParameters"):(n.state="showResult",n.call=n.name+"("+n.arguments.join(", ")+")",void t.invoke(n.parent.application,n.parent.bean,n.signature,n.arguments).then(function(t){n.response=t}).catch(function(t){n.response=t})))}}],template:e(150)}},100:function(t,n,e){"use strict";t.exports={require:{invocation:"^sbaJmxInvocation"},controller:function(){var t=this;t.$onInit=function(){t.arguments=new Array(t.invocation.descriptor.args.length),t.errors=new Array(t.invocation.descriptor.args.length)},t.applyParameters=function(){var n=t.arguments.find(function(t){return null!==t&&null!==t.error});n||(t.invocation.arguments=t.arguments.map(function(t){return t.value}),t.invocation.proceedJmxInvocation())},t.updateArg=function(n,e,r){t.arguments[n]={value:e,error:r}}},template:e(151)}},101:function(t,n,e){"use strict";t.exports={require:{invocation:"^sbaJmxInvocation"},controller:function(){var t=this;t.selectOverload=function(n){t.invocation.descriptor=n,t.invocation.proceedJmxInvocation()}},template:e(152)}},102:function(t,n,e){"use strict";t.exports={require:{invocation:"^sbaJmxInvocation"},template:e(153)}},103:function(t,n){"use strict";t.exports=["$scope","application","ApplicationJmx",function(t,n,e){"ngInject";t.error=null,t.domains=[],e.list(n).then(function(n){t.domains=n}).catch(function(n){t.error=n})}]},104:function(t,n){"use strict";t.exports=["$rootScope","jolokia","$q",function(t,n,e){"ngInject";function r(t){var n=t.name||t.title||null,e=t.type||t.j2eetype||null,r=null;e&&(r="["+e+"]");var a=[];for(var o in t)t.hasOwnProperty(o)&&"name"!==o&&"title"!==o&&"type"!==o&&"j2eetype"!==o&&a.push(o+": "+t[o]);var i=null;return a.length>0&&(i="("+a.join(", ")+")"),[n,r,i].filter(function(t){return null!==t}).join(" ")}this.list=function(t){return n.list("api/applications/"+t.id+"/jolokia/").then(function(t){var n=[];for(var e in t.value)if(t.value.hasOwnProperty(e)){var a=t.value[e],o={name:e,beans:[]};for(var i in a)if(a.hasOwnProperty(i)){for(var s=a[i],l={id:o.name+":"+i,name:"",domain:o.name,nameProps:{},description:s.desc,operations:s.op,attributes:s.attr},c=i.split(","),u=0;u<c.length;u++){var p=c[u].split("=");l.nameProps[p[0].toLowerCase()]=p[1]}l.name=r(l.nameProps),o.beans.push(l)}n.push(o)}return n}).catch(function(t){return e.reject(t)})},this.readAllAttr=function(t,e){return n.read("api/applications/"+t.id+"/jolokia/",e.id)},this.writeAttr=function(t,e,r,a){return n.writeAttr("api/applications/"+t.id+"/jolokia/",e.id,r,a)},this.invoke=function(t,e,r,a){return n.exec("api/applications/"+t.id+"/jolokia/",e.id,r,a)}}]},105:function(t,n,e){"use strict";var r=e(1),a=e(20);t.exports=["$q",function(t){"ngInject";var n=this,e=new a;this.bulkRequest=function(n,a){var o=t.defer();o.notify(a);var i=!1,s=[];return e.request(a,{url:n,method:"post",success:function(t){s.push(t),s.length>=a.length&&(i?o.resolve(s):o.resolve(s))},error:function(t){i=!0,s.push(t),s.length>=a.length&&o.reject(s)},ajaxError:function(t){i=!0,s.push(r.fromJson(t.responseText)),s.length>=a.length&&o.reject(s,t.status)}}),o.promise},this.request=function(n,a){var o=t.defer();return o.notify(a),e.request(a,{url:n,method:"post",success:function(t){o.resolve(t)},error:function(t){o.reject(t)},ajaxError:function(t){o.reject(r.fromJson(t.responseText),t.status)}}),o.promise},this.exec=function(t,e,r,a){return n.request(t,{type:"exec",mbean:e,operation:r,arguments:a})},this.read=function(t,e){return n.request(t,{type:"read",mbean:e,config:{ignoreErrors:!0}})},this.readAttr=function(t,e,r){return n.request(t,{type:"read",mbean:e,attribute:r,config:{ignoreErrors:!0}})},this.writeAttr=function(t,e,r,a){return n.request(t,{type:"write",mbean:e,attribute:r,value:a})},this.list=function(t){return n.request(t,{type:"list",config:{ignoreErrors:!0}})},this.search=function(t,e){return n.request(t,{type:"search",mbean:e,config:{ignoreErrors:!0}})}}]},148:function(t,n){t.exports='<input ng-show="$ctrl.inputType" class="input-xxlarge" type="{{$ctrl.inputType}}" ng-model="$ctrl.value" ng-readonly="$ctrl.disabled"\n\tng-change="$ctrl.valueChanged()"></input>\n<select ng-show="$ctrl.selectOptions" class="input-xxlarge" ng-model="$ctrl.value" ng-readonly="$ctrl.disabled" ng-change="$ctrl.valueChanged()">\n    <option ng-repeat="opt in $ctrl.selectOptions" value="{{opt}}" ng-selected="$ctrl.value == opt">{{opt}}</option>\n</select>\n<textarea ng-show="$ctrl.isObject" style="word-break: break-all;" class="input-xxlarge" rows="6" ng-model="$ctrl.json" ng-change="$ctrl.jsonChanged()"\n\tng-readonly="$ctrl.disabled"></textarea>'},149:function(t,n){t.exports='<h3 ng-bind="$ctrl.bean.name"><br/><small ng-bind="$ctrl.bean.description"></small></h3>\n<div ng-show="$ctrl.error" class="alert alert-error"> <b>Error:</b> {{$ctrl.error}}</div>\n<dl>\n\t<dt>Id</dt>\n\t<dd style="word-break: break-all;" ng-bind="$ctrl.bean.id"></dd>\n\t<dt ng-repeat-start="(name, value) in $ctrl.bean.nameProps" ng-bind="name"></dt>\n\t<dd ng-repeat-end ng-bind="value"></dd>\n</dl>\n<form class="form-horizontal">\n\t<fieldset ng-show="$ctrl.bean.attributes">\n\t\t<legend>Attributes\n\t\t\t<button class="btn" ng-click="$ctrl.readAttributeValues()">reload</button>\n\t\t\t<span ng-show="$ctrl.readingAttributes"><i class="fa fa-spinner fa-pulse"></i></span>\n\t\t</legend>\n\t\t<div class="control-group" ng-repeat="(name, attribute) in $ctrl.attributes track by name" ng-class="{error: attribute.error}">\n\t\t\t<label class="control-label" for="{{name}}" style="word-break: break-all;">\n        {{name}}\n        <br/><small class="muted" ng-bind="attribute.descriptor.type"></small>\n      </label>\n\t\t\t<div class="controls">\n\t\t\t\t<div class="input-prepend">\n\t\t\t\t\t<button class="btn" type="button" ng-click="$ctrl.writeAttributeValue(name)" ng-disabled="!attribute.descriptor.rw">write</button>\n\t\t\t\t\t<sba-java-type-input sba-type="{{attribute.descriptor.type}}" sba-value="attribute.value" sba-change="$ctrl.updateAttributeValue(name, value, error)"\n\t\t\t\t\t\tsba-disabled="!attribute.descriptor.rw"></sba-java-type-input>\n\t\t\t\t</div>\n\t\t\t\t<span class="help-block" ng-bind="attribute.descriptor.desc"></span>\n\t\t\t\t<span class="help-inline" ng-bind="attribute.error"></span>\n\t\t\t</div>\n\t\t</div>\n\t</fieldset>\n\t<fieldset ng-show="$ctrl.bean.operations">\n\t\t<legend>Operations</legend>\n\t\t<div class="control-group" ng-if="!$ctrl.invocation">\n\t\t\t<button ng-repeat="(name, op) in $ctrl.bean.operations track by name" class="btn btn-block" style="text-align: left; padding: 8px 15px;"\n\t\t\t\tng-click="$ctrl.doInvoke(name, op)">\n        <b ng-bind="name"></b>\n        <span ng-if="!op.length">(<span ng-repeat-start="arg in op.args" data-toggle="tooltip" title="{{arg.desc}}">{{arg.type}} {{arg.name}}</span><span ng-repeat-end ng-if="!$last">, </span> )</span>\n        <br/>\n        <span class="help-block"><small class="muted" style="word-break: break-all;" ng-bind="op.ret"></small></span>\n        <span class="help-block"><small class="muted" ng-show="op.length > 0">overloaded</small></span>\n        <span class="help-block" ng-bind="op.desc"></span>\n      </button>\n\t\t</div>\n\t\t<div ng-if="$ctrl.invocation">\n\t\t\t<sba-jmx-invocation operation-name="$ctrl.invocation.name" operation-descriptor="$ctrl.invocation.operation" on-cancel="$ctrl.cancelInvoke()"></sba-jmx-invocation>\n\t\t</div>\n\t</fieldset>\n</form>'},150:function(t,n){t.exports="<sba-jmx-invoke-select-overload ng-if=\"$ctrl.state == 'selectOverload'\"></sba-jmx-invoke-select-overload>\n<sba-jmx-invoke-input-parameters ng-if=\"$ctrl.state == 'inputParameters'\"></sba-jmx-invoke-input-parameters>\n<sba-jmx-invoke-show-result ng-if=\"$ctrl.state == 'showResult'\"></sba-jmx-invoke-show-result>\n<button class=\"btn\" ng-click=\"$ctrl.cancelInvoke()\" ng-bind=\"$ctrl.state == 'showResult' ? 'Done' : 'Cancel'\"></button>\n"},151:function(t,n){t.exports='<!--\n  ~ Copyright 2014-2017 the original author or authors.\n  ~\n  ~ Licensed under the Apache License, Version 2.0 (the "License");\n  ~ you may not use this file except in compliance with the License.\n  ~ You may obtain a copy of the License at\n  ~\n  ~     http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~ Unless required by applicable law or agreed to in writing, software\n  ~ distributed under the License is distributed on an "AS IS" BASIS,\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~ See the License for the specific language governing permissions and\n  ~ limitations under the License.\n  -->\n\n<form class="form">\n    <p>Please input the arguments for {{$ctrl.invocation.signature}}\n        <small class="muted">: {{$ctrl.invocation.descriptor.ret}}</small>\n    </p>\n    <div class="control-group" ng-repeat="arg in $ctrl.invocation.descriptor.args"\n         ng-class="{ error : $ctrl.arguments[$index].error }">\n        <label class="control-label" for="{{arg.name}}" style="word-break: break-all;">{{arg.name}}<br>\n            <small class="muted" style="word-break: break-all;" ng-bind="arg.type"></small>\n        </label>\n        <div class="controls">\n            <sba-java-type-input sba-type="{{arg.type}}"\n                                 sba-change="$ctrl.updateArg($index, value, error)"></sba-java-type-input>\n            <span class="help-inline" ng-bind="$ctrl.arguments[$index].error"></span>\n            <span class="help-block" ng-bind="arg.desc"></span>\n        </div>\n    </div>\n    <button class="btn btn-primary" ng-click="$ctrl.applyParameters()">Execute</button>\n</form>'},152:function(t,n){t.exports='<form class="form">\n    <p>The method {{$ctrl.invocation.name}} is overloaded. Please choose a variant.</p>\n    <div class="control-group">\n        <button class="btn btn-block" style="text-align: left; padding: 8px 15px;" ng-repeat="op in $ctrl.invocation.descriptor" ng-click="$ctrl.selectOverload(op)">\n            <b ng-bind="$ctrl.invocation.name"></b>(<span ng-repeat-start="arg in op.args" data-toggle="tooltip" title="{{arg.desc}}">{{arg.type}} {{arg.name}}</span><span ng-repeat-end ng-if="!$last">, </span> )\n            <br/>\n            <small class="muted" ng-bind="op.ret"></small>\n            <span class="help-block" ng-bind="op.desc"></span>\n        </button>\n    </div>\n</form>\n'},153:function(t,n){t.exports='<div>\n    <p>Result for {{$ctrl.invocation.call}} <small class="muted">: {{$ctrl.invocation.descriptor.ret}}</small></p>\n    <div ng-if="!$ctrl.invocation.response" class="progress progress-striped active">\n        <div class="bar" style="width: 100%;">executing ... </div>\n    </div>\n    <div ng-if="$ctrl.invocation.response.value !== undefined">\n        <div class="alert alert-success"><b>Success</b></div>\n        <pre style="white-space: pre-wrap;">{{ $ctrl.invocation.response.value | json }}</pre>\n    </div>\n    <div ng-if="$ctrl.invocation.response.error">\n        <div class="alert alert-error">\n            <b>Error:</b> {{$ctrl.invocation.response.error}}\n        </div>\n        <pre style="white-space: pre-wrap;">{{$ctrl.invocation.response.stacktrace}}</pre>\n    </div>\n</div>\n'}});