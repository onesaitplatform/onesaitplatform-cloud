<!--

    Copyright Indra Soluciones Tecnologías de la Información, S.L.U.
    2013-2023 SPAIN

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
         http://www.apache.org/licenses/LICENSE-2.0
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

-->
<div class="row main">
	<div id="tablecontainerpopup" class="col-md-12">
		<div id="contenedor-tabla-outside" class="contiene hidden">
			<div>
				<!-- DATATABLE DANDELION CONF.  -->
				<table id="environments" class="table table-hover table-striped" dt:table="true" dt:paginationtype="full">
					<thead>
						<tr class="cabecera-tabla">
							<th class="titulo-columnas" style="width: 150px;" th:text="#{environment.deploymentName}">Deployment Name</th>
							<th class="titulo-columnas" th:text="#{environment.image}"Image</th>
							<th class="titulo-columnas" th:text="#{environment.startingtime}"Image</th>
							<th class="titulo-columnas text-left" th:text="#{environment.cpu}">CPU</th>
							<th class="titulo-columnas text-left" th:text="#{environment.memory}">Memory</th>
							<th class="titulo-columnas text-left" th:text="#{environment.active}">Status</th>
							<th class="titulo-columnas" th:text="#{environment.numOfPods}">Number of Pods</th>
							<th class="titulo-columnas text-center" dt:sortable="false"	style="width:85px;"><span th:text="#{gen.options}"> Options</span>
							</th>
						</tr>
					</thead>
					<tbody th:remove="all-but-first">
						<tr th:each="deployment : ${environment.deployments}" pages:paginate="10">
							<!-- deploymentName -->
							<td class="text-left no-wrap " th:text="${deployment.moduleName}"></td>
							<!-- deploymentImage -->
							<td class="text-left no-wrap " th:text="${deployment.image}"></td>
							<!-- startingTime -->
							<td class="text-left no-wrap " th:text="${deployment.createdAt}"></td>
							<!-- cpu -->
							<td class="text-left text-truncate-xxs" th:title="${deployment.moduleCPU}" th:text="${deployment.moduleCPU}"></td>
							<!--  memory -->
							<td class="text-left text-truncate-xxs" th:title="${deployment.moduleMemory}" th:text="${deployment.moduleMemory}"></td>
							<!--  active -->
							<td class="text-left text-truncate-xxs"	th:title="${deployment.statusModule}">
								<span th:if="${deployment.statusModule}">
									<!-- Círculo verde -->
									<i class="badge badge-empty-success"></i>
								</span>
								<span th:unless="${deployment.statusModule}">
									<!-- Círculo rojo -->
									<i class="badge badge-empty-error"></i>
								</span>
							</td>
							<!--  numOfPods -->
							<td class="text-left text-truncate-xxs"	th:title="${deployment.numPodsModule}"	th:text="${deployment.numPodsModule}"></td>
		
							<!-- OPTIONS -->
							<td class="icon text-center" style="white-space: nowrap">
								<div class="grupo-iconos">
									<!-- STOP -->
									<span th:if="${!deployment.statusModule}" th:title="#{environment.start}"
										class="btn btn-xs btn-no-border icon-on-table color-blue tooltips"
										data-container="body" data-placement="bottom"
										th:data-original-title="#{environment.start}"
										th:attr="onclick='EnvironmentController.startEnvironmentConfirm(\'' + ${deployment.moduleName} + '\');'">
										<i class="icon-play"></i>
									</span>
									<span th:if="${deployment.statusModule}" th:title="#{environment.stop}"
										class="btn btn-xs btn-no-border icon-on-table color-blue tooltips"
										data-container="body" data-placement="bottom"
										th:data-original-title="#{environment.stop}"
										th:attr="onclick='EnvironmentController.stopEnvironmentConfirm(\'' + ${deployment.moduleName} + '\');'">
										<i class="icon-stop" style="font-size: 10px; margin-right: 4px;"></i>
									</span>
									<span th:title="#{environment.configuration}"
										class="btn btn-xs btn-no-border icon-on-table color-blue tooltips"
										data-container="body" data-placement="bottom"
										th:data-original-title="#{environment.configuration}"
										th:attr="onclick='EnvironmentController.loadConfig(\'' + ${deployment.moduleName} + '\')'">
										<i class="icon-configuration" style="font-size: 12px;" ></i>
									</span>
		
									<!-- DROP -->
									<span class="dropdown">
										<span class="btn btn-xs btn-no-border color-blue icon-on-table" data-container="body" data-placement="bottom" data-toggle="dropdown" data-hover="dropdown" data-close-others="true"><i class="icon-overflow"></i></span>
										<ul class="dropdown-menu dropdown-menu-table download-menu">
											<li>
												<span class="btn btn-xs btn-no-border btn-circle btn-outline color-blue"
													data-container="body" data-placement="bottom"
													th:attr="onclick='EnvironmentController.restartEnvironmentConfirm(\'' + ${deployment.moduleName} + '\');'">
		
													<span class="span-title-three-dots-icons" th:text="#{environment.restart}">Restart Module</span>
												</span>
											</li>
											<li>
												<span class="btn btn-xs btn-no-border btn-circle btn-outline color-yellow"
													data-container="body" data-placement="bottom"
													th:attr="onclick='EnvironmentController.scaleEnvironmentConfirm(\'' + ${deployment.moduleName} + '\');'">
		
													<span class="span-title-three-dots-icons" th:text="#{environment.scale}">Scale Module</span>
												</span>
											</li>
											<li>
												<span class="btn btn-xs btn-no-border btn-circle btn-outline color-green"
													data-container="body" data-placement="bottom"
													th:attr="onclick='EnvironmentController.updateEnvironmentConfirm(\'' + ${deployment.moduleName} + '\');'">
		
													<span class="span-title-three-dots-icons" th:text="#{environment.update}">Update Module</span>
												</span>
											</li>
										</ul>
									</span>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div id="dialog-config" tabindex="-1" role="dialog" class="modal fade" style="display: none;">
		<!-- MODAL FOR VIEW WHEN NODE-RED-->
		<div class="modal-dialog">
		    <!-- Modal content-->
		    <div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title" th:text="#{environment.configuration}"></h4>
				</div>
				<div class="modal-body">
					<div id="deployment-detail-fragment" th:include="environments/fragments/deploymentdetail"></div>
				</div>
				<div class="modal-footer">
			        <button type="button" class="btn btn-circle btn-outline blue" data-dismiss="modal" th:text = "#{apimanager.customsql.close}">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>