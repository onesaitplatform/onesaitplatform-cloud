<md-dialog aria-label="Add Gadget">
    <md-toolbar>
        <div class="md-toolbar-tools">
          <h2>Create using template?</h2>
          <span flex></span>
          <md-button class="md-icon-button" ng-click="cancel()">
            <b>X</b>
          </md-button>
        </div>
      </md-toolbar>
  <form ng-cloak>
    <md-input-container>
      <label>Select Template Type</label>
      <md-select ng-model="templatetype" ng-change="template == null">
        <md-option ng-value="ttype.id" ng-repeat="ttype in templatetypes">{{ttype.identification}}</md-option>
      </md-select>
    </md-input-container>
    <md-input-container>
      <label>Select Template</label>
      <md-select ng-model="template" md-on-open="loadTemplates(templatetype)">
        <md-option ng-value="template" ng-repeat="template in templates">
          <span>
            <strong> {{template.identification}} </strong>
          </span>
          <span>
            {{template.description}}
          </span>
        </md-option>
      </md-select>
    </md-input-container>

    <md-dialog-actions layout="row">
      <span flex></span>      
      <md-button class="md-warn" ng-click="noUseTemplate()">
        No, start with empty {{templatetype}} template
      </md-button>
      <md-button class="md-raised md-primary" ng-click="useTemplate(true)">
        Yes, use {{template.identification}}
      </md-button>
      <md-button class="md-raised md-primary" ng-click="useTemplate()">
        Yes, copy {{template.identification}} for edit
      </md-button>
    </md-dialog-actions>
  </form>
</md-dialog>
