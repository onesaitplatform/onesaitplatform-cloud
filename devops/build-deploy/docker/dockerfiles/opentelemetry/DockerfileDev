FROM jaegertracing/all-in-one:1.45

COPY otelcol-config.yml /etc/otelcol-config.yml

RUN addgroup -S onesait -g 433 && adduser -u 431 -S -g onesait -h /usr/local -s /sbin/nologin onesait

USER onesait

ENV SPAN_STORAGE_TYPE=elasticsearch \
    COLLECTOR_ZIPKIN_HOST_PORT=:9411 \
    ES_SERVER_URLS=http://opensearch:9200 \
    COLLECTOR_OTLP_ENABLED=true \
    QUERY_BASE_PATH=/jaeger
